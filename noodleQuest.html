<!DOCTYPE html>
<html>
<head>
    <title>Noodle's Quest</title>
    <meta charset="utf-8">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function ()
        {
            var player =
                {
                    //TODO decide values
                    positionX: 0,
                    positionY: 0,
                    size:50,
                    warmth: 10,

                    //directions
                    idle: 0,
                    left: 1,
                    up: 2,
                    down: 3,
                    right: 4,

                    //TODO fix place holder below
                    image: "Images/Snake.png",
                    hasMouse: false,
                    Update: function ()
                    {

                        //player.positionX += 100; //TODO delete this

                        //move player based on direction 
                        switch (player.direction)
                        {
                            case player.left:
                                player.positionX -= 50; 
                                break;
                            case player.up:
                                player.positionY -= 50; 
                                break;
                            case player.down:
                                player.positionY += 50; 
                                break;
                            case player.right:
                                player.positionX += 50; 
                                break;
                            default:
                                break;
                        };

                        //TODO (check which squares player is in, lose one heat)

                        //TODO If sunlight, warmth = 10

                        //TODO If(warmth = 0) Game over

                        //TODO If hawk, display game over screen

                        //TODO If points, score += 5

                        //TODO If mouse, hasMouse = true

                        //TODO If home and hasMouse = true, display win screen
                    }

                };

            var canvas = $("#myCanvas");
            var context = canvas.get(0).getContext("2d");
            
            var drawImage = new Image();
            drawImage.src = player.image;
            drawImage.addEventListener("load", render, false);
            //drawImage.addEventListener("load", map.createMatrix, false);
            window.addEventListener("keyup", keyupHandler, false);
            window.addEventListener("keydown", keydownHandler, false);

            function render()
            {
                //clear the screen
                context.clearRect(0, 0, 800, 800);
                
                //TODO DrawMap
                var _image = new Image();
                var x = 1;
                var y = 1;
                var size = 50;

                //for each x position
                for (var i = 0; i < 15; i++)
                {
                        //for each y position
                    for (var j = 0; j < 5; j++)
                    {
                        //draw the square
                        //mapMatrix[i][j]
                        //drawingSurface.drawImage(image, X, Y, width, height);
                        //image = "Images/Grass.jpg";

                        //context.drawImage(image, x, y, size, size);
                        //x += 50;
                        //y += 50;

                        switch (mapMatrix[i][j])
                        {
                        //    case "home":
                        //        break;
                        //    case "mouse": /* Shouldn't there be code in here? */
                        //        break;
                        //    case "empty":
                        //        break;
                        //    default:
                        //        break;
                        };
                        //context.drawImage("Images/Grass.png", 100, 100, 50, 50);
                        _image.src = "Images/Grass.jpg";
                        x = size * i;
                        y = size * j;
                        context.drawImage(_image, x, y, size, size);
                    };
                };

                //DrawPlayer
                context.drawImage(drawImage, player.positionX, player.positionY, player.size, player.size);

                    //TODO DrawSidebar
            }

            function keyupHandler(event)
            {
                //TODO fun stuff?
                player.Update();
                //map.Update();
                
                render();
                //player.direction = player.idle;
            };
            function keydownHandler(event)
            {
                //TODO If(arrow directions) move in that direction
                if (event.keyCode == 65) { /*move left*/ player.direction = player.left; }
                if (event.keyCode == 87) { /*move up*/ player.direction = player.up; }
                if (event.keyCode == 83) { /*move down*/ player.direction = player.down; }
                if (event.keyCode == 68) { /*move right*/ player.direction = player.right; }

            };
            
            function Tile(_type, _image, _size)
            {
                this.type = _type;
                this.image = _image;
                this.size = _size;
            };

            function Hawk(_x, _y)
            {
                this.image = "Images/Hawk.jpg";
                this.positionX = _x;
                this.positionY = _y;
            };
            var mapMatrix=
                [
                    [map.home, map.rockWall, map.sun, map.empty, map.empty, map.empty, map.empty, map.empty, map.empty, map.rockWall, map.rockWall, map.sun, map.empty, map.empty, map.empty],
                    [map.empty, map.rockWall, map.empty, map.empty, map.empty, map.empty, map.empty, map.empty, map.sun, map.rockWall, map.rockWall, map.empty, map.empty, map.empty, map.sun],
                    [map.empty, map.empty, map.empty, map.empty, map.sun, map.empty, map.empty, map.rockWall, map.empty, map.empty, map.empty, map.empty, map.empty, map.empty, map.empty],
                    [map.empty, map.empty, map.rockWall, map.empty, map.rockWall, map.rockWall, map.empty, map.empty, map.empty, map.empty, map.empty, map.rockWall, map.empty, map.rockWall, map.empty],
                    [map.sun, map.empty, map.empty, map.empty, map.rockWall, map.rockWall, map.sun, map.empty, map.empty, map.empty, map.empty, map.sun, map.empty, map.rockWall, map.mouse],
                ];
            var map =
                {
                    size: 50,
                    //TODO figure out if this works
                    home: Tile( 0, "Images/Home.jpg", size),
                    mouse: Tile(1, "Images/Mouse.jpg", size),
                    empty: Tile(2, "Images/Grass.jpg", size),
                    sun: Tile(3, "Images/Sunlight.jpg", size),
                    pointsTile: Tile(4, "Images/PointSquare.jpg", size),
                    rockWall: Tile(5, "Images/Rock.jpg", size),

                    //Matrix of tile objects
                    //instantiate the array

                    
                    createMatrix: function ()
                    {
                       
                        //set every value to zero
                        //for (i = 0; i < iMax; i++)
                        //{
                        //    mapMatrix[i] = new Array();
                        //    for (j = 0; j < jMax; j++)
                        //    {
                        //        mapMatrix[i][j] = empty;
                        //    }
                        //}

                        //manually input everything that is a thing
                        //mapMatrix[x][y] = tileName;

                        //            mapMatrix[0][0] = home;
                        //            mapMatrix[1][0] = rockWall;
                        //            mapMatrix[2][0] = sun;
                        //            mapMatrix[9][0] = rockWall;
                        //            mapMatrix[10][0] = rockWall;
                        //            mapMatrix[11][0] = sun;

                        //            mapMatrix[1][1] = rockWall;
                        //            mapMatrix[7][1] = sun;
                        //            mapMatrix[9][1] = rockWall;
                        //            mapMatrix[10][1] = rockWall;
                        //            mapMatrix[14][1] = sun;

                        //            mapMatrix[4][2] = sun;
                        //            mapMatrix[7][2] = rockWall;

                        //            mapMatrix[2][5] = rockWall;
                        //            mapMatrix[4][5] = rockWall;
                        //            mapMatrix[5][5] = rockWall;
                        //            mapMatrix[11][5] = rockWall;
                        //            mapMatrix[13][5] = rockWall;

                        //            mapMatrix[0][4] = sun;
                        //            mapMatrix[4][4] = rockWall;
                        //            mapMatrix[5][4] = rockWall;
                        //            mapMatrix[6][4] = sun;
                        //            mapMatrix[11][4] = sun;
                        //            mapMatrix[13][4] = rockWall;
                        //            mapMatrix[14][4] = mouse;

                        //for convenience the two hawks are at [2][6] and [10][4]
                    },

                    //Hawk array of 2
                    hawk1: Hawk(3, 3),
                    hawk2: Hawk(3, 3),
                    hawks: [hawk1, hawk2],
                    score,

                    Update: function ()
                    {
                        //TODO move hawks using RnG
                        //Random number 0 - 3
                        //Math.floor(Math.random() * 4);
                        //TODO If (number = 0 & hawk.x > 0) Go left
                        //TODO Etc…
                        //TODO If(player.location = hawk.location) Game over
                        //TODO Decrease score by 1
                    },
                };

            function GameOver()
            {
                //TODO Game Over pop- up
                //TODO Refresh button
            };
            function Sidebar()
            {
                //TODO Title of game
                //TODO displays map.Score
                //TODO displays Player.Sunlight
                //TODO displays player.hasMouse
                //TODO Instructions
            };
        });

        //////////////////////////////////////////////////////////////////Back ups
        //////////////////////////////////////////////////////////////////
    //              Actual Locations
    //            mapMatrix[0][0] = home;
    //            mapMatrix[1][0] = rockWall;
    //            mapMatrix[2][0] = sun;
    //            mapMatrix[9][0] = rockWall;
    //            mapMatrix[10][0] = rockWall;
    //            mapMatrix[11][0] = sun;

    //            mapMatrix[1][1] = rockWall;
    //            mapMatrix[7][1] = sun;
    //            mapMatrix[9][1] = rockWall;
    //            mapMatrix[10][1] = rockWall;
    //            mapMatrix[14][1] = sun;

    //            mapMatrix[4][2] = sun;
    //            mapMatrix[7][2] = rockWall;

    //            mapMatrix[2][5] = rockWall;
    //            mapMatrix[4][5] = rockWall;
    //            mapMatrix[5][5] = rockWall;
    //            mapMatrix[11][5] = rockWall;
    //            mapMatrix[13][5] = rockWall;

    //            mapMatrix[0][4] = sun;
    //            mapMatrix[4][4] = rockWall;
    //            mapMatrix[5][4] = rockWall;
    //            mapMatrix[6][4] = sun;
    //            mapMatrix[11][4] = sun;
    //            mapMatrix[13][4] = rockWall;
    //            mapMatrix[14][4] = mouse;
        
                //function Render()
                //{
                //    //clear the screen
                //    drawingSurface.clearRect(0, 0, canvas.width, canvas.height);
                //    //TODO DrawMap

                //    //draw player
                //    drawingSurface.drawImage(_image, 10, 10, 50, 50);

                //    //for each x position
                //    for (i = 0; i < map.iMax; i++)
                //    {
                //        //for each y position
                //        for (j = 0; j < map.jMax; j++)
                //        {
                //            //draw the square
                //            //mapMatrix[i][j]
                //            //drawingSurface.drawImage(image, X, Y, width, height);
                //            image = mapMatrix[i][j].image
                //            drawingSurface.drawImage(image, (i * mapMatrix[i][j].size),
                //                (j * mapMatrix[i][j].size), mapMatrix[i][j].size, mapMatrix[i][j].size);
                //        }
                //    }
                    //TODO DrawPlayer
                    //TODO DrawSidebar
                //}

                
        </script>
  </head >
            <body>
                <canvas id="myCanvas" width="800" height="400">
                    <!-- Insert fallback content here --> </canvas>

                
                <button id="change"></button>
            </body> 
</html >